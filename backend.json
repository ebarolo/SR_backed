{"asctime": "2025-09-30 01:42:19,038", "levelname": "WARNING", "name": "py.warnings", "message": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/main.py:38: ResourceWarning: unclosed file <_io.TextIOWrapper name='/Users/eb/Documents/GitHub/smart Recipe/SR_backed/backend.json' mode='w' encoding='utf-8'>\n  setup_logging()\n", "request_id": "-", "job_id": "-", "pathname": "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/warnings.py", "lineno": 109, "source_file": "warnings.py", "source_line": 109, "source_func": "_showwarnmsg", "error_chain": "-"}
{"asctime": "2025-09-30 01:42:56,842", "levelname": "INFO", "name": "rag._weaviate", "message": "Connesso a Weaviate: euaollxerumlvktea79rzq.c0.europe-west3.gcp.weaviate.cloud", "request_id": "-", "job_id": "82a7f8de-0184-4e1a-9e88-ff3277b149d1", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/rag/_weaviate.py", "lineno": 52, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:42:56,843", "levelname": "INFO", "name": "rag._weaviate", "message": "Collection: Recipe_Vector", "request_id": "-", "job_id": "82a7f8de-0184-4e1a-9e88-ff3277b149d1", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/rag/_weaviate.py", "lineno": 53, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:42:56,843", "levelname": "INFO", "name": "importRicette.scrape.instaLoader", "message": "No Instagram credentials available, proceeding without authentication", "request_id": "process_video_29e82bcc", "job_id": "82a7f8de-0184-4e1a-9e88-ff3277b149d1", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/scrape/instaLoader.py", "lineno": 39, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:42:56,844", "levelname": "INFO", "name": "importRicette.scrape.instaLoader", "message": "Processing URL: https://www.instagram.com/reel/DBRNCSpx9N9/?igsh=MW4zZDBrNnY5ZWJyNg==", "request_id": "process_video_29e82bcc", "job_id": "82a7f8de-0184-4e1a-9e88-ff3277b149d1", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/scrape/instaLoader.py", "lineno": 51, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:42:56,844", "levelname": "INFO", "name": "importRicette.scrape.instaLoader", "message": "Extracted shortcode: DBRNCSpx9N9", "request_id": "process_video_29e82bcc", "job_id": "82a7f8de-0184-4e1a-9e88-ff3277b149d1", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/scrape/instaLoader.py", "lineno": 91, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:42:56,845", "levelname": "INFO", "name": "importRicette.scrape.instaLoader", "message": "Created folder for download: /Users/eb/Documents/GitHub/smart Recipe/SR_backed/static/mediaRicette/DBRNCSpx9N9/media_original", "request_id": "process_video_29e82bcc", "job_id": "82a7f8de-0184-4e1a-9e88-ff3277b149d1", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/scrape/instaLoader.py", "lineno": 146, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:43:00,773", "levelname": "WARNING", "name": "py.warnings", "message": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/.venv/lib/python3.12/site-packages/instaloader/structures.py:415: DeprecationWarning: datetime.datetime.utcfromtimestamp() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.fromtimestamp(timestamp, datetime.UTC).\n  return datetime.utcfromtimestamp(self._get_timestamp_date_created())\n", "request_id": "process_video_29e82bcc", "job_id": "82a7f8de-0184-4e1a-9e88-ff3277b149d1", "pathname": "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/warnings.py", "lineno": 109, "source_file": "warnings.py", "source_line": 109, "source_func": "_showwarnmsg", "error_chain": "-"}
{"asctime": "2025-09-30 01:43:00,774", "levelname": "INFO", "name": "importRicette.scrape.instaLoader", "message": "Post attributes extracted", "request_id": "process_video_29e82bcc", "job_id": "82a7f8de-0184-4e1a-9e88-ff3277b149d1", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/scrape/instaLoader.py", "lineno": 170, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-", "shortcode": "DBRNCSpx9N9", "attributes_count": 30}
{"asctime": "2025-09-30 01:43:03,442", "levelname": "WARNING", "name": "importRicette.save", "message": "FFmpeg non ha creato il file audio per 'DBRNCSpx9N9', continuo senza audio", "request_id": "process_video_29e82bcc", "job_id": "82a7f8de-0184-4e1a-9e88-ff3277b149d1", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/save.py", "lineno": 233, "source_file": "save.py", "source_line": 233, "source_func": "_process_video_internal", "error_chain": "-"}
{"asctime": "2025-09-30 01:43:03,443", "levelname": "INFO", "name": "importRicette.save", "message": "Audio length: 0, Caption length: 647", "request_id": "process_video_29e82bcc", "job_id": "82a7f8de-0184-4e1a-9e88-ff3277b149d1", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/save.py", "lineno": 298, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:43:05,456", "levelname": "INFO", "name": "openai._base_client", "message": "Retrying request to /responses in 0.407946 seconds", "request_id": "process_video_29e82bcc", "job_id": "82a7f8de-0184-4e1a-9e88-ff3277b149d1", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/.venv/lib/python3.12/site-packages/openai/_base_client.py", "lineno": 1071, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:43:06,871", "levelname": "INFO", "name": "openai._base_client", "message": "Retrying request to /responses in 0.955732 seconds", "request_id": "process_video_29e82bcc", "job_id": "82a7f8de-0184-4e1a-9e88-ff3277b149d1", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/.venv/lib/python3.12/site-packages/openai/_base_client.py", "lineno": 1071, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:43:09,339", "levelname": "ERROR", "name": "importRicette.analize", "message": "Error in extract_recipe_info: Quota OpenAI esaurita durante extract_recipe_info", "request_id": "process_video_29e82bcc", "job_id": "82a7f8de-0184-4e1a-9e88-ff3277b149d1", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/utility/logging_config.py", "lineno": 295, "source_file": "analize.py", "source_line": 207, "source_func": "extract_recipe_info", "error_chain": "extract_recipe_info: QuotaExceededError", "exc_info": "Traceback (most recent call last):\n  File \"/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/analize.py\", line 105, in extract_recipe_info\n    OpenAIresponse = await asyncio.to_thread(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/eb/Documents/GitHub/smart Recipe/SR_backed/.venv/lib/python3.12/site-packages/openai/resources/responses/responses.py\", line 828, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/Users/eb/Documents/GitHub/smart Recipe/SR_backed/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1259, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/eb/Documents/GitHub/smart Recipe/SR_backed/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1047, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "operation": "extract_recipe_info", "exception_type": "QuotaExceededError", "audio_text_length": 0, "caption_text_length": 647, "ingredients_count": 0, "actions_count": 0, "audio_preview": "", "caption_preview": "My fav lazy girl lunch: Salmon Crudo! Season thin slices of sushi-grade salmon with ponzu, yuzu, lemon zest, and a drizzle of a nice extra virgin olive oil. Top with jalapeo, chives, and flaky sea sal... [tot: 647 chars]"}
{"asctime": "2025-09-30 01:43:09,349", "levelname": "ERROR", "name": "importRicette.save", "message": "Error in extract_recipe_openai_error: OpenAI error in recipe extraction: ⚠️ Quota OpenAI esaurita. Verifica il tuo piano su https://platform.openai.com/account/billing e ricarica crediti.", "request_id": "process_video_29e82bcc", "job_id": "82a7f8de-0184-4e1a-9e88-ff3277b149d1", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/utility/logging_config.py", "lineno": 309, "source_file": "save.py", "source_line": 309, "source_func": "_process_video_internal", "error_chain": "extract_recipe_info: QuotaExceededError -> extract_recipe_openai_error: OpenAI error in recipe extraction: ⚠️ Quota OpenAI esaurita. Verifica il tuo piano su https://platform.openai.com/account/billing e ricarica crediti.", "operation": "extract_recipe_openai_error", "shortcode": "DBRNCSpx9N9", "error_type": "quota_exceeded", "should_retry": false, "context": {"audio_text_length": 0, "caption_text_length": 647, "ingredients_count": 0, "actions_count": 0, "audio_preview": "", "caption_preview": "My fav lazy girl lunch: Salmon Crudo! Season thin slices of sushi-grade salmon with ponzu, yuzu, lemon zest, and a drizzle of a nice extra virgin olive oil. Top with jalapeo, chives, and flaky sea sal... [tot: 647 chars]"}}
{"asctime": "2025-09-30 01:43:09,349", "levelname": "ERROR", "name": "importRicette.ingest", "message": "Error in openai_error_url_1: OpenAI error processing URL: Quota OpenAI esaurita durante extract_recipe_info", "request_id": "process_video_29e82bcc", "job_id": "82a7f8de-0184-4e1a-9e88-ff3277b149d1", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/utility/logging_config.py", "lineno": 309, "source_file": "ingest.py", "source_line": 149, "source_func": "_process_urls", "error_chain": "extract_recipe_info: QuotaExceededError -> extract_recipe_openai_error: OpenAI error in recipe extraction: ⚠️ Quota OpenAI esaurita. Verifica il tuo piano su https://platform.openai.com/account/billing e ricarica crediti. -> openai_error_url_1: OpenAI error processing URL: Quota OpenAI esaurita durante extract_recipe_info", "operation": "openai_error_url_1", "url": "https://www.instagram.com/reel/DBRNCSpx9N9/?igsh=MW4zZDBrNnY5ZWJyNg==", "shortcode": "DBRNCSpx9N9", "error_type": "quota_exceeded", "should_retry": false}
{"asctime": "2025-09-30 01:43:09,353", "levelname": "INFO", "name": "rag._weaviate", "message": "Connessione Weaviate chiusa correttamente", "request_id": "process_video_29e82bcc", "job_id": "82a7f8de-0184-4e1a-9e88-ff3277b149d1", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/rag/_weaviate.py", "lineno": 542, "source_file": null, "source_line": null, "source_func": null, "error_chain": "extract_recipe_openai_error: OpenAI error in recipe extraction: ⚠️ Quota OpenAI esaurita. Verifica il tuo piano su https://platform.openai.com/account/billing e ricarica crediti. -> openai_error_url_1: OpenAI error processing URL: Quota OpenAI esaurita durante extract_recipe_info -> process_url_1: QuotaExceededError"}
{"asctime": "2025-09-30 01:50:51,503", "levelname": "INFO", "name": "rag._weaviate", "message": "Connesso a Weaviate: euaollxerumlvktea79rzq.c0.europe-west3.gcp.weaviate.cloud", "request_id": "-", "job_id": "bf7ab513-d367-4b85-8a34-c2ed91b20df8", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/rag/_weaviate.py", "lineno": 52, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:50:51,505", "levelname": "INFO", "name": "rag._weaviate", "message": "Collection: Recipe_Vector", "request_id": "-", "job_id": "bf7ab513-d367-4b85-8a34-c2ed91b20df8", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/rag/_weaviate.py", "lineno": 53, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:50:51,509", "levelname": "INFO", "name": "importRicette.scrape.instaLoader", "message": "No Instagram credentials available, proceeding without authentication", "request_id": "process_video_742c1de3", "job_id": "bf7ab513-d367-4b85-8a34-c2ed91b20df8", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/scrape/instaLoader.py", "lineno": 39, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:50:51,509", "levelname": "INFO", "name": "importRicette.scrape.instaLoader", "message": "Processing URL: https://www.instagram.com/reel/DBo7roZI1YT/?igsh=MW93NTR4Y2llYTR5NQ==", "request_id": "process_video_742c1de3", "job_id": "bf7ab513-d367-4b85-8a34-c2ed91b20df8", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/scrape/instaLoader.py", "lineno": 51, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:50:51,510", "levelname": "INFO", "name": "importRicette.scrape.instaLoader", "message": "Extracted shortcode: DBo7roZI1YT", "request_id": "process_video_742c1de3", "job_id": "bf7ab513-d367-4b85-8a34-c2ed91b20df8", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/scrape/instaLoader.py", "lineno": 91, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:50:51,511", "levelname": "INFO", "name": "importRicette.scrape.instaLoader", "message": "Created folder for download: /Users/eb/Documents/GitHub/smart Recipe/SR_backed/static/mediaRicette/DBo7roZI1YT/media_original", "request_id": "process_video_742c1de3", "job_id": "bf7ab513-d367-4b85-8a34-c2ed91b20df8", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/scrape/instaLoader.py", "lineno": 146, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:50:56,797", "levelname": "WARNING", "name": "py.warnings", "message": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/.venv/lib/python3.12/site-packages/instaloader/structures.py:415: DeprecationWarning: datetime.datetime.utcfromtimestamp() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.fromtimestamp(timestamp, datetime.UTC).\n  return datetime.utcfromtimestamp(self._get_timestamp_date_created())\n", "request_id": "process_video_742c1de3", "job_id": "bf7ab513-d367-4b85-8a34-c2ed91b20df8", "pathname": "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/warnings.py", "lineno": 109, "source_file": "warnings.py", "source_line": 109, "source_func": "_showwarnmsg", "error_chain": "-"}
{"asctime": "2025-09-30 01:50:56,798", "levelname": "INFO", "name": "importRicette.scrape.instaLoader", "message": "Post attributes extracted", "request_id": "process_video_742c1de3", "job_id": "bf7ab513-d367-4b85-8a34-c2ed91b20df8", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/scrape/instaLoader.py", "lineno": 170, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-", "shortcode": "DBo7roZI1YT", "attributes_count": 30}
{"asctime": "2025-09-30 01:50:59,763", "levelname": "WARNING", "name": "importRicette.save", "message": "FFmpeg non ha creato il file audio per 'DBo7roZI1YT', continuo senza audio", "request_id": "process_video_742c1de3", "job_id": "bf7ab513-d367-4b85-8a34-c2ed91b20df8", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/save.py", "lineno": 233, "source_file": "save.py", "source_line": 233, "source_func": "_process_video_internal", "error_chain": "-"}
{"asctime": "2025-09-30 01:50:59,764", "levelname": "INFO", "name": "importRicette.save", "message": "Audio length: 0, Caption length: 1202", "request_id": "process_video_742c1de3", "job_id": "bf7ab513-d367-4b85-8a34-c2ed91b20df8", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/save.py", "lineno": 298, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:53:19,426", "levelname": "INFO", "name": "importRicette.analize", "message": "Image saved successfully", "request_id": "process_video_742c1de3", "job_id": "bf7ab513-d367-4b85-8a34-c2ed91b20df8", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/analize.py", "lineno": 409, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-", "output_path": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/static/mediaRicette/DBo7roZI1YT/media_recipe/image_copertina_1.jpg", "image_type": "copertina", "image_index": 1}
{"asctime": "2025-09-30 01:53:19,427", "levelname": "INFO", "name": "importRicette.save", "message": "Processing completato per 'DBo7roZI1YT'. Titolo: 'Tagliolini fatti in casa con crema di zucca e tartufo nero uncinato'", "request_id": "process_video_742c1de3", "job_id": "bf7ab513-d367-4b85-8a34-c2ed91b20df8", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/save.py", "lineno": 372, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-", "shortcode": "DBo7roZI1YT", "title": "Tagliolini fatti in casa con crema di zucca e tartufo nero uncinato"}
{"asctime": "2025-09-30 01:53:19,429", "levelname": "WARNING", "name": "py.warnings", "message": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/.venv/lib/python3.12/site-packages/tenacity/asyncio/__init__.py:114: RuntimeWarning: coroutine 'to_thread' was never awaited\n  result = await fn(*args, **kwargs)\n", "request_id": "process_video_742c1de3", "job_id": "bf7ab513-d367-4b85-8a34-c2ed91b20df8", "pathname": "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/warnings.py", "lineno": 109, "source_file": "warnings.py", "source_line": 109, "source_func": "_showwarnmsg", "error_chain": "-"}
{"asctime": "2025-09-30 01:53:21,423", "levelname": "INFO", "name": "importRicette.ingest", "message": "call add_recipes_batch", "request_id": "process_video_742c1de3", "job_id": "bf7ab513-d367-4b85-8a34-c2ed91b20df8", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/ingest.py", "lineno": 201, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:53:21,588", "levelname": "INFO", "name": "rag._weaviate", "message": "Esecuzione batch atomico per 1 ricette", "request_id": "process_video_742c1de3", "job_id": "bf7ab513-d367-4b85-8a34-c2ed91b20df8", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/rag/_weaviate.py", "lineno": 380, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:53:23,474", "levelname": "INFO", "name": "rag._weaviate", "message": "✅ Processate 1/1 ricette. Fallite: 0", "request_id": "process_video_742c1de3", "job_id": "bf7ab513-d367-4b85-8a34-c2ed91b20df8", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/rag/_weaviate.py", "lineno": 384, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:53:23,475", "levelname": "INFO", "name": "importRicette.ingest", "message": "ricette inserite con successo", "request_id": "process_video_742c1de3", "job_id": "bf7ab513-d367-4b85-8a34-c2ed91b20df8", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/importRicette/ingest.py", "lineno": 203, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
{"asctime": "2025-09-30 01:53:23,477", "levelname": "INFO", "name": "rag._weaviate", "message": "Connessione Weaviate chiusa correttamente", "request_id": "process_video_742c1de3", "job_id": "bf7ab513-d367-4b85-8a34-c2ed91b20df8", "pathname": "/Users/eb/Documents/GitHub/smart Recipe/SR_backed/rag/_weaviate.py", "lineno": 542, "source_file": null, "source_line": null, "source_func": null, "error_chain": "-"}
